<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Arithmetic Calculator</title>
  <link rel="stylesheet" href="calc.css">
</head>

<body>

  <div class="calc-card">
    <h2>사칙연산 계산기</h2>

    <div class="input-group">
      <label>첫 번째 숫자</label>
      <input type="number" id="num1" placeholder="숫자를 입력하세요">
    </div>

    <div class="input-group">
      <label>연산 선택</label>
      <select id="operator">
        <option value="add">더하기 (+)</option>
        <option value="sub">빼기 (-)</option>
        <option value="mul">곱하기 (×)</option>
        <option value="div">나누기 (÷)</option>
      </select>
    </div>

    <div class="input-group">
      <label>두 번째 숫자</label>
      <input type="number" id="num2" placeholder="숫자를 입력하세요">
    </div>

    <button class="btn-calc" onclick="calculate()">계산하기</button>

    <div class="result-box">
      <label>계산 결과</label>
      <span id="resultValue">0</span>
    </div>
  </div>

  <script>
    var num1 = document.getElementById("num1");
    var num2 = document.getElementById("num2");
    var oper = document.getElementById("operator");
    var result = document.getElementById("resultValue");


    function calculate() {
      var xhr = new XMLHttpRequest();
      //var url  = `http://192.168.56.101:8000/calc/${encodeURIComponent(num1)}/${encodeURIComponent(num2)}/${encodeURIComponent(oper)}`
      var url = "http://192.168.56.101:8000/calc/" + num1.value + "/" + num2.value + "/" + oper.value

      xhr.open("GET", url, true);

      xhr.onload = function (e) {
        // console.log(xhr.responseText)
        if (e.target.status == 200 && e.target.statusText == "OK") {
          obj = JSON.parse(xhr.responseText)
          result.textContent = obj.result
        }
      };
      xhr.send()
    }
  </script>
</body>

</html>